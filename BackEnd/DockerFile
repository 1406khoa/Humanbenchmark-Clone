# Sử dụng Node.js phiên bản 18 trên Alpine
FROM node:18-alpine

# Thiết lập thư mục làm việc bên trong container
WORKDIR /app

# Copy các file package.json và package-lock.json từ thư mục BackEnd
COPY BackEnd/package.json BackEnd/package-lock.json ./

# Cài đặt dependencies (loại trừ dev dependencies)
RUN npm install --omit=dev

# Copy toàn bộ mã nguồn từ thư mục BackEnd vào container
COPY BackEnd/ .

# Mở cổng 3000 (Railway sẽ override biến PORT nếu cần)
EXPOSE 3000

# Lệnh khởi động ứng dụng (đảm bảo tên file đúng)
CMD ["node", "server.js"]
